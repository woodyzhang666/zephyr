
/dts-v1/;

#include <wch/ch57x/ch582m.dtsi>
#include <zephyr/dt-bindings/gpio/gpio.h>

/ {
	model = "ch582m evaluation board";
	compatible = "wch,ch582m";

	chosen {
		zephyr,sram = &sram0;
		zephyr,flash = &flash0;
		zephyr,console = &uart1;
		zephyr,shell-uart = &uart1;
	};

	dap-pins {
		compatible = "gpio-keys";

        conn_led: led0 {
            gpios = <&gpio0 10 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
            label = "Conn LED";
        };

        run_led: led1 {
            gpios = <&gpio0 11 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
            label = "Run LED";
        };

		swclk_tck: swclk_tck {
			gpios = <&gpio0 14 0>;
			label = "SWDCK_TCK";
		};

		swdio_tms_in: swdio_tms_in {
			gpios = <&gpio0 13 0>;
			label = "SWDIO_TMS_IN";
		};

		swdio_tms_out: swdio_tms_out {
			gpios = <&gpio0 15 0>;
			label = "SWDIO_TMS_OUT";
		};

		tdi: tdi {
			gpios = <&gpio1 7 0>;
			label = "TDI";
		};

		tdo: tdo {
			gpios = <&gpio1 4 0>;
			label = "TDO";
		};

		nreset: nreset {
			gpios = <&gpio0 12 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
			label = "nRESET";
		};

		pwr_sw: pwr_sw {
			gpios = <&gpio1 13 0>;
			label = "PWR SW";
		};

		pwr_button: button0 {
			gpios = <&gpio1 22 (GPIO_PULL_UP | GPIO_ACTIVE_LOW)>;
			label = "POWER BUTTON";
		};
	};

};

&clk_hse {
	clock-frequency = <DT_FREQ_M(32)>;
	status = "okay";
};

&clk_pll {
	status = "okay";
};

&rcc {
	clocks = <&clk_pll>;
	clock-frequency = <DT_FREQ_M(80)>;
	status = "okay";
};

&uart1 {
	current-speed = <115200>;
	status = "okay";
};

zephyr_udc0: &usbhd0 {
	status = "okay";
	num-bidir-endpoints = <5>;
};
